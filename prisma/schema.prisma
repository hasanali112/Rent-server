generator client {
  provider = "prisma-client"
  output   = "./generated"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String     @id @default(uuid())
  email              String?    @unique
  contactNumber      String?    @unique
  password           String?
  role               UserRole
  needPasswordChange Boolean    @default(true)
  status             UserStatus @default(ACTIVE)
  createdAt          DateTime   @default(now())
  updatedAt          DateTime   @updatedAt
  admin              Admin?
  cutomer            Customer?
  host               Host?
  doctor             Doctor?

  @@map("users")
}

model Admin {
  id            String   @id @default(uuid())
  name          String
  email         String?  @unique
  userId        String   @unique
  profilePhoto  String?
  contactNumber String?
  isDeleted     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("admins")
}

model Doctor {
  id                  String   @id @default(uuid())
  name                String
  email               String   @unique
  profilePhoto        String?
  contactNumber       String
  address             String?
  registrationNumber  String
  experience          Int      @default(0)
  gender              Gender
  appointmentFee      Int
  qualification       String
  currentWorkingPlace String
  designation         String
  isDeleted           Boolean  @default(false)
  averageRating       Float    @default(0.0)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  user                User     @relation(fields: [email], references: [email])

  @@map("doctors")
}

model Host {
  id               String       @id @default(uuid())
  userId           String       @unique
  email            String?      @unique
  name             String?
  profilePhoto     String?
  contactNumber    String?
  address          String?
  gender           String?
  dateOfBirth      DateTime?
  preferences      Json?
  rating           Float?
  verified         Boolean      @default(false)
  joinedAt         DateTime     @default(now())
  lastActiveAt     DateTime?
  bookingCount     Int          @default(0)
  favoriteServices Json?
  notes            String?
  isDeleted        Boolean      @default(false)
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  houseRents       HouseRent[]
  hostelRents      HostelRent[]
  user             User         @relation(fields: [userId], references: [id])

  @@map("hosts")
}

model Customer {
  id               String    @id @default(uuid())
  userId           String    @unique
  email            String?   @unique
  name             String?
  profilePhoto     String?
  contactNumber    String?
  address          String?
  gender           String?
  dateOfBirth      DateTime?
  preferences      Json?
  rating           Float?
  verified         Boolean   @default(false)
  joinedAt         DateTime  @default(now())
  lastActiveAt     DateTime?
  bookingCount     Int       @default(0)
  favoriteServices Json?
  notes            String?
  isDeleted        Boolean   @default(false)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  user User @relation(fields: [userId], references: [id])

  @@map("customers")
}

model Category {
  id            String       @id @default(uuid())
  categoryName  String
  categoryImage String
  isDeleted     Boolean      @default(false)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  houseRents    HouseRent[]
  hostelRents   HostelRent[]

  @@map("categories")
}

model HouseRent {
  id            String       @id @default(uuid())
  title         String
  description   String
  price         Float
  propertyType  PropertyType
  bedrooms      Int
  bathrooms     Int
  size          Float
  floor         String
  totalFloors   Int
  furnishing    Furnishing
  availableFrom DateTime
  address       String
  area          String
  city          String
  division      String
  lat           Float
  lng           Float
  isAvailable   Boolean      @default(true)
  isDeleted     Boolean      @default(false)
  categoryId    String
  category      Category     @relation(fields: [categoryId], references: [id])
  ownerId       String
  owner         Host         @relation(fields: [ownerId], references: [id])
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt

  @@map("houseRents")
}

model HostelRent {
  id          String     @id @default(uuid())
  title       String
  description String
  price       Float
  currency    String
  type        RentType
  gender      Gender
  tenantType  TenantType
  roomType    RoomType
  mealOptions MealOption
  mealsPerDay Int?
  mealTiming  String[]
  floor       String
  totalFloors Int
  address     String
  area        String
  city        String
  division    String
  lat         Float
  lng         Float
  isAvailable Boolean    @default(true)
  isDeleted   Boolean    @default(false)
  categoryId  String
  category    Category   @relation(fields: [categoryId], references: [id])
  ownerId     String
  owner       Host       @relation(fields: [ownerId], references: [id])
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  @@map("hostelRents")
}

model Blog {
  id          String   @id @default(uuid())
  title       String
  description String
  blogImage   String
  isDeleted   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("blogs")
}

enum UserRole {
  ADMIN
  SUPER_ADMIN
  HOST
  DOCTOR
  CUSTOMER
}

enum UserStatus {
  PENDING
  ACTIVE
  INACTIVE
  BLOCKED
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum PropertyType {
  Apartment
  House
  Studio
  Duplex
  Penthouse
}

enum Furnishing {
  Furnished
  Semi_Furnished
  Unfurnished
}

enum RentType {
  Mess
  Hostel
}

enum TenantType {
  Student
  Job_Holder
  Both
}

enum RoomType {
  Single
  Shared_2_person
  Shared_3_4_person
}

enum MealOption {
  Included
  Not_Included
  Optional
}
